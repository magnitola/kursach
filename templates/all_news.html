<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>News - LOCKED</title>
    <link href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cookie">
    <link rel="stylesheet" href="/static/news/css/Pretty-Header.css">
    <link rel="stylesheet" href="/static/news/css/styles.css">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300&display=swap" rel="stylesheet">
</head>

<body>
<nav class="navbar navbar-light navbar-expand-md custom-header">
    <div class="container-fluid">
        <div><a class="navbar-brand" href="#">LOCKED</a>
            <button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navbar-collapse"><span
                    class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
        </div>
        <div class="collapse navbar-collapse justify-content-end" id="navbar-collapse">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link text-white" href="#">Add news</a></li>
                <li class="nav-item"></li>
            </ul>
            <ul class="navbar-nav">
                <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" aria-expanded="false"
                                                 data-bs-toggle="dropdown" href="#"> <img class="dropdown-image"
                                                                                          src="/static/news/img/avatar.jpg"></a>
                    <div class="dropdown-menu dropdown-menu-end">
                        <a class="dropdown-item" href="#">Settings </a>
                        <a class="dropdown-item" href="#">Payments </a>
                        <a class="dropdown-item" href="#">Logout </a></div>
                </li>
            </ul>
        </div>
    </div>
</nav>
<div class="container mt-3">
    <div class="row flex-lg-row flex-column justify-content-center">
        <div class="col col-lg-8 m-2">
            <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
                <div class="col p-4 d-flex flex-column position-static">
                    <strong class="d-inline-block mb-2 text-primary">Мир</strong>
                    <h3 class="mb-0">Рекомендуемый пост</h3>
                    <div class="mb-1 text-muted">12 Ноября</div>
                    <p class="card-text mb-auto">Это более широкая карточка с вспомогательным текстом ниже в качестве
                        естественного перехода к дополнительному контенту.</p>
                    <a href="#" class="stretched-link">Продолжить чтение</a>
                </div>
                <div class="col-auto d-none d-lg-block">
                    <svg class="bd-placeholder-img" width="200" height="250" xmlns="http://www.w3.org/2000/svg"
                         role="img" aria-label="Placeholder: Эскиз" preserveAspectRatio="xMidYMid slice"
                         focusable="false"><title>Placeholder</title>
                        <rect width="100%" height="100%" fill="#55595c"></rect>
                    </svg>

                </div>
            </div>


            <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
                <div class="col p-4 d-flex flex-column position-static">
                    <strong class="d-inline-block mb-2 text-primary">Мир</strong>
                    <h3 class="mb-0">Рекомендуемый пост</h3>
                    <div class="mb-1 text-muted">12 Ноября</div>
                    <p class="card-text mb-auto">Это более широкая карточка с вспомогательным текстом ниже в качестве
                        естественного перехода к дополнительному контенту.</p>
                    <a href="#" class="stretched-link">Продолжить чтение</a>
                </div>
                <div class="col-auto d-none d-lg-block">
                    <svg class="bd-placeholder-img" width="200" height="250" xmlns="http://www.w3.org/2000/svg"
                         role="img" aria-label="Placeholder: Эскиз" preserveAspectRatio="xMidYMid slice"
                         focusable="false"><title>Placeholder</title>
                        <rect width="100%" height="100%" fill="#55595c"></rect>
                    </svg>

                </div>
            </div>

            <!-- ПАГИНАЦИЯ -->
            <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-center">
                    <li class="page-item active" id="pagin_left"><a class="page-link" tabindex="-1">First</a></li>
                    <li class="page-item active" id="pagin_first"><a class="page-link">1</a></li>
                </ul>
            </nav>
            <!-- КОНЕЦ ПАГИНАЦИИ -->
        </div>



        <div class="col col-lg-3 m-2">
            <div class="row">
                <div class="col params">
                    <div class="row">
                        <div class="col">
                            <p class="title">Filters</p>
                            <ul class="list-group">
                                <li class="list-group-item about"><span><input class="form-control" data-date-format="dd/mm/yyyy" id="datepicker" readonly style="width: 100%;"></span></li>
                                <li class="list-group-item about"><span><input class="form-control" id="exampleInputEmail1" placeholder="Search" style="width: 100%;"></span></li>
                                <li class="list-group-item sort about-active" id="views"><span>Sort by views</span></li>
                                <li class="list-group-item sort about-passive" id="time"><span>Sort by time</span></li>
                                <li class="list-group-item sort about-passive" id="likes"><span>Sort by likes</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col params">
                    <div class="row">
                        <div class="col">
                            <p class="title">Tags</p>
                            <ul class="list-group">
                                <li class="list-group-item tags about-passive" id="web"><span>Web programming</span></li>
                                <li class="list-group-item tags about-passive" id="js"><span>Java Script</span></li>
                                <li class="list-group-item tags about-passive" id="njs"><span>Node JS</span></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<script src="/static/bootstrap/js/bootstrap.min.js"></script>
</body>
<script type="text/javascript">
let current_page = 1;
let count_posts_on_page = 5;
let count_all_posts = 16;
let max_page = Math.ceil(count_all_posts / count_posts_on_page);

if (max_page >= 2)
    $('.pagination').append('<li class="page-item" id="pagin_second"><a class="page-link">2</a></li>');
if (max_page >= 3)
    $('.pagination').append('<li class="page-item" id="pagin_third"><a class="page-link">3</a></li>');
$('.pagination').append('<li class="page-item" id="pagin_right"><a class="page-link">Last</a></li>');
if (max_page === 1)
    $('#pagin_right').addClass('active');

$(document).ready(() => {
    $('#datepicker').datepicker({
        weekStart: 1,
        daysOfWeekHighlighted: "6,0",
        autoclose: true,
        todayHighlight: true,
    });
    $('#datepicker').datepicker("setDate", new Date());

    // Скрипт обработки нажатий на сортировку
    let sort = 'views';
    $('.sort').click(function () {
        if ($(this).hasClass('about-passive')) {
            $(this).removeClass('about-passive');
            $(this).addClass('about-active');
            sort = $(this).attr('id');
        }
        let this_elem = $(this);
        $('.sort').each(function (i, elem) {
            if (!$(this).is(this_elem) && $(this).hasClass('about-active')) {
                $(this).addClass('about-passive');
                $(this).removeClass('about-active');
            }
        });
    });

    // Скрипт обработки нажатий на теги
    let tags = [];
    $('.tags').click(function () {
        if ($(this).hasClass('about-passive')) {
            $(this).removeClass('about-passive');
            $(this).addClass('about-active');
            tags.push($(this).attr('id'));
        }
        else {
            $(this).removeClass('about-active');
            $(this).addClass('about-passive');
            let this_tag = $(this).attr('id');
            tags.splice(tags.indexOf(this_tag), 1);
        }
    });

    // Обработка пагинации
    $('.page-item').click(function () {
        let elem = $(this);
        current_page = Number(elem.text());
        if (!elem.hasClass('active')) {
            $('.page-item').each(function (i, elem) {
                $(this).removeClass('active');
            });
            if (elem.attr('id') === 'pagin_left') {
                current_page = 1;
                $('#pagin_left').addClass('active');
                $('#pagin_first').addClass('active');
                set_text_pagin(1, 2, 3);
            }
            else if (elem.attr('id') === 'pagin_right') {
                $('#pagin_right').addClass('active');
                current_page = max_page;
                if (current_page === 2)
                    $('#pagin_second').addClass('active');
                else
                    $('#pagin_third').addClass('active');
                if (max_page > 3)
                    set_text_pagin(current_page - 2, current_page - 1, current_page);
            }
            else
            if (current_page === 1) {
                $('#pagin_left').addClass('active');
                $('#pagin_first').addClass('active');
            }
            else {
                if (current_page === max_page) {
                    $('#pagin_right').addClass('active');
                    if (current_page === 2)
                        $('#pagin_second').addClass('active');
                    else
                        $('#pagin_third').addClass('active');
                } else {
                    $('#pagin_second').addClass('active');
                    set_text_pagin(current_page - 1, current_page, current_page + 1);
                }
            }


        }
    });

});
function set_text_pagin(first, second, third) {
    $('#pagin_first a').text(String(first));
    $('#pagin_second a').text(String(second));
    $('#pagin_third a').text(String(third));
}
</script>
</html>